
@model Model.ManageTemplate

@{

    Layout = null;
    var model = Model.DefaultTemplate;
    var markdown = Model.MarkDownTemplate;
    var CommanTemplate = Model.CommanTemplate;
    if (model.Width == null) { model.Width = 0; }
    if (model.Height == null) { model.Height = 0; }
    if (markdown.Width == null) { markdown.Width = 0; }
    if (markdown.Height == null) { markdown.Height = 0; }

    var marklenthId = markdown?.LengthId;
    var lenthId = model?.LengthId;

    double width = 0.0;//model?.Width;
    double height = 0.0;// model?.Height;
    double markwidth = 0.0;
    double markheight = 0.0;

    double cm = 38.0;

    if (model != null)
    {
        if (lenthId == 1)
        {
            width = (double)model?.Width * cm;
            height = (double)model?.Height * cm;
        }
        else if (lenthId == 2)
        {
            width = (double)model?.Width * cm * 2.54;
            height = (double)model?.Height * cm * 2.54;
        }
        else if (lenthId == 3)
        {
            width = (double)model?.Width;
            height = (double)model?.Height;
        }
        if (width > 2480)
        {
            width = 2480;
        }
        if (height > 3508)
        {
            height = 3508;
        }
    }
    else
    {
        width = 300;
        height = 300;
    }

    if (markdown != null)
    {
        if (marklenthId == 1)
        {
            markwidth = (double)markdown?.Width * cm;
            markheight = (double)markdown?.Height * cm;
        }
        else if (marklenthId == 2)
        {
            markwidth = (double)markdown?.Width * cm * 2.54;
            markheight = (double)markdown?.Height * cm * 2.54;
        }
        else if (marklenthId == 3)
        {
            markwidth = (double)markdown?.Width;
            markheight = (double)markdown?.Height;
        }
        if (markwidth > 2480)
        {
            markwidth = 2480;
        }
        if (markheight > 3508)
        {
            markheight = 3508;
        }
    }
    else
    {
        markwidth = 300;
        markheight = 300;
    }

}
@*<div style="width:100%">*@

@*<div style="width:100%; min-height: 300px;height:auto;border: 1px solid #808080;display:flex;align-items:center;justify-content:center ">*@
<div class="modal-body">
    <div class="row mrgn-b-md">
        <div class="col-md-2 col-xs-12 col-sm-2">
            <label>Sizes</label>
            @Html.DropDownList("CreateSize", null, "-Sizes-", htmlAttributes: new { @class = "form-control", @Id = "IsMarkDown", @onchange = "ShowSize()" })
        </div>
        <div class="col-md-4 col-xs-12 col-sm-4">
            <div id="comman-template">
                <div @*style="width:@(width)px;display:flex;padding:15px;height:@(height)px;border: 2px solid #808080; margin:0 auto;align-items:center;justify-content:center; float: left"*@>
                    <div class="inner-print def-bar">
                        @Html.Raw(CommanTemplate.TemplateHtml)
                    </div>
                </div>
            </div>
        </div>
            <div class="col-md-2">
                <button type="button" class="btn btn-success" onclick="printElem('comman-template')">Print</button>
            </div>
        </div>
    <hr />
        <div class="row">
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-12 mrgn-b-sm">
                        <div id="default-template">
                            <div @*style="width:@(width)px;display:flex;padding:15px;height:@(height)px;border: 2px solid #808080; margin:0 auto;align-items:center;justify-content:center; float: left"*@>

                                <div class="inner-print def-bar">
                                    @Html.Raw(model.TemplateHtml)
                                </div>
                                <p>Left Foot</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <button type="button" class="btn btn-success" onclick="printElem('default-template')">Print</button>
                    </div>
                </div>

            </div>
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-12 mrgn-b-sm">
                        <div id="markdown-template">
                            <div @*style="width:@(markwidth)px;display:flex;padding:15px;height:@(markheight)px;border: 2px solid #808080; margin:0 auto;align-items:center;justify-content:center "*@>
                                <div class="inner-print mark-bar">
                                    @Html.Raw(markdown.TemplateHtml)
                                </div>
                                <p>Right Foot</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <button type="button" class="btn btn-success" onclick="printElem('markdown-template')">Print</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script type="text/javascript">

    @*function GetValue() {
        var def=@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(model.TemplateHtml))
        var mark=@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(markdown.TemplateHtml))

    }*@

    function printElem(divId) {
        debugger;
        var content = document.getElementById(divId).innerHTML;
        var mywindow = window.open('', 'Print', 'height=600,width=800');
        mywindow.document.write('<html><head><title>Print</title>');
        mywindow.document.write('</head><body >');
        mywindow.document.write(content);
        mywindow.document.write('</body></html>');
        mywindow.document.close();
        mywindow.focus()
        mywindow.print();
        mywindow.close();
        return true;
    }
    function ShowSize() {
        debugger
        var size = $('#IsMarkDown').val();
        var barcodeMark = $("#hiddenbarcodemark").val();
        JsBarcode('#barcodemark', barcodeMark + size+"_02", { width: 2, height: 40 });
        var barcodeDef = $("#hiddenbarcodedef").val();
        JsBarcode('#barcodedef', barcodeDef + size+"_01", { width: 2, height: 40 });
        var barcodeDef1 = $("#hiddenbarcodedef1").val();
        JsBarcode('#barcodedef1', barcodeDef1 + size, { width: 2, height: 40 });
    }
</script>